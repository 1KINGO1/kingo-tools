const {prefix} = require("../config.json");
const {checkRoles, checkChannels} = require("../utils/checkAvailability");
const {MessageEmbed, MessageActionRow, MessageButton} = require("discord.js");
const items = require("../modules/economy/items");
module.exports = {
  name: "inventory",
  description: "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å.",
  example: `${prefix}inventory`,
  category: "economy",
  execute: async function (message, command, guild) {
    if (!guild.options.economy.on) return;
    let messageArray = message.content.split(' ');
    let args = messageArray.slice(1);
    let member = await message.guild.members.fetch(message.author.id);
    if (!await checkRoles(command, member)) {
      message.reply("–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É!");
      return;
    }
    ;
    if (!await checkChannels(command, message.channel.id)) {
      message.reply("–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –∑–¥–µ—Å—å!");
      return;
    }
    let user = JSON.parse(JSON.stringify(guild.options.economy.users.find(user => user.id === message.author.id) || ""));
    if (!user) {
      let embed = new MessageEmbed()
        .setDescription("üëπ –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É!.")
        .setColor("#eb4034");
      message.reply({embeds: [embed]});
      return;
    }
    let embed = new MessageEmbed()
      .setTitle(`–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å ${message.author.tag}`)
      .setColor("#378f00");
    user.inventory.forEach(item => {
      embed.addField(`${item.name} ${item.icon}`, `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:  ${item.amount}`)
    })
    message.reply({embeds: [embed]});
  }
}