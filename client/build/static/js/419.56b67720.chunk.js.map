{"version":3,"file":"static/js/419.56b67720.chunk.js","mappings":"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","sources":["utils/adminAPI.ts","pages/profile-page/pages/admin/AddFlag.tsx","pages/profile-page/pages/admin/UsersTable.tsx","pages/profile-page/pages/admin/Admin.tsx"],"sourcesContent":["import axios from \"axios\";\nimport config from \"../config/config\";\n\nexport const getUsers = async () => {\n  const {data} = await axios.get(config.API_URL + \"/admin/users\", {\n    withCredentials: true\n  });\n  return data;\n};\n\nexport const createUser = async (login: string, password: string) => {\n  if (!login || !password){\n    return {err: true, message: \"Заполните все поля!\"}\n  }\n  const {data} =  await axios.post(config.API_URL + \"/admin/create\", {\n    login, password\n  }, {withCredentials: true});\n  return data;\n}\n\nexport const deleteUser = async (login: string) => {\n  const {data} =  await axios.post(config.API_URL + \"/admin/delete\", {\n    login\n  }, {withCredentials: true});\n  return data;\n}\n\nexport const addFlag = async (login: string, flagID: number) => {\n  const {data} =  await axios.post(config.API_URL + \"/admin/addFlag\", {\n    login, flagID\n  }, {withCredentials: true});\n  return data;\n}\n\nexport const removeFlag = async (login: string, flagID: number) => {\n  const {data} =  await axios.post(config.API_URL + \"/admin/removeFlag\", {\n    login, flagID\n  }, {withCredentials: true});\n  return data;\n}\n\nexport const getFlags = async () => {\n  const {data} =  await axios.get(config.API_URL + \"/admin/flags\", {withCredentials: true});\n  return data;\n}","import React, {FC} from \"react\";\nimport styled from \"styled-components\";\nimport {Checkbox, Tag} from \"antd\";\nimport {addFlag, removeFlag} from \"../../../../utils/adminAPI\";\nimport { CheckboxChangeEvent } from \"antd/lib/checkbox\";\n\nconst StyledAddFlag = styled.div<StyledProps>`\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  width: 200px;\n  top: ${props => props.y}px;\n  left: ${props => props.x}px;\n  display: ${props => props.isShow ? \"block\" : \"none\"};\n  background-color: ${props => props.theme.colors.darkPrimary};\n  box-shadow: 0px 0px 12px ${props => props.theme.colors.dark};\n  z-index: 99999999999;\n`;\n\nexport interface Flag {\n  id: number,\n  title: string,\n  color: string\n}\n\ninterface StyledProps {\n  x: number,\n  y: number,\n  isShow: boolean,\n  onClick: any\n}\n\ninterface AddFlagProps extends StyledProps {\n  flags: Array<Flag>,\n  includedFlags: Array<number>,\n  updateUsers: Function,\n  login: string,\n}\n\nexport const AddFlag: FC<AddFlagProps> = ({ x,\n                                            y,\n                                            isShow,\n                                            flags,\n                                            includedFlags,\n                                            updateUsers,\n                                            login,\n                                            onClick }\n) => {\n\n  const changeHandler = (e: CheckboxChangeEvent, flag: Flag) => {\n    if (e.target.checked){\n      addFlag(login, flag.id).then(() =>  {\n        updateUsers();\n      })\n    }\n    else{\n      removeFlag(login, flag.id).then(() =>  {\n        updateUsers();\n      });\n    }\n  }\n\n  return (\n    <StyledAddFlag x={x} y={y} isShow={isShow} onClick={onClick}>\n      {flags.map(flag => {\n        return (\n          <Checkbox key={flag.id}\n                    style={{margin: \"4px auto\"}}\n                    checked={flags.some(() => includedFlags.includes(flag.id))}\n                    onChange={(e: CheckboxChangeEvent) => changeHandler(e, flag)}\n          >\n            <Tag color={flag.color} key={flag.id}>{flag.title}</Tag>\n          </Checkbox>)\n      })}\n    </StyledAddFlag>\n  )\n}","import React, {MouseEvent, FC, useEffect, useState} from \"react\";\nimport styled from \"styled-components\";\nimport {PlusOutlined} from \"@ant-design/icons\";\nimport {Button, Input, message, Space, Table, Tag} from \"antd\";\nimport {createUser, deleteUser, getFlags, getUsers} from \"../../../../utils/adminAPI\";\nimport {useSelector} from \"react-redux\";\nimport {RootState} from \"../../../../store/store\";\nimport {AddFlag, Flag} from \"./AddFlag\";\nimport {Loading} from \"../../../../components/Loading\";\n\ninterface User {\n    login: string,\n    password: string,\n    flags: Array<any>\n}\n\nconst StyledTable = styled.div``;\n\nconst StyledTableFooter = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  > * {\n    margin: 0px 10px;\n  }\n`;\n\nconst AddTag = styled.div`\n  cursor: pointer;\n  display: inline-block;\n  align-items: center;\n`;\n\nexport const UsersTable: FC = () => {\n\n    const [fetchedUsers, setFetchedUsers] = useState<User[] | null>(null);\n    const [login, setLogin] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n    const currentLogin = useSelector<RootState>(state => state.auth.user.login);\n\n    const [x, setX] = useState(0);\n    const [y, setY] = useState(0);\n    const [isVisible, setVisible] = useState(false);\n    const [flags, setFlags] = useState<Flag[] | null>(null);\n    const [flagLogin, setFlagLogin] = useState(\"\");\n    const [includedFlags, setIncludedFlags] = useState<number[]>([]);\n\n    const fetchUsers = (): void => {\n        getUsers().then((data) => {\n            if (!data.err) {\n                setFetchedUsers(data.users)\n            } else {\n                setFetchedUsers(null);\n            }\n        });\n    };\n\n    const addFlagClickHandler = (e: MouseEvent<HTMLDivElement>) => {\n        setVisible(false);\n        e.stopPropagation();\n    }\n\n    //Fetching users\n    useEffect(fetchUsers, []);\n\n    //Fetching all flags\n    useEffect(() => {\n        getFlags().then(data => {\n            if (!data.err) {\n                setFlags(data)\n            } else {\n                setFlags(null);\n            }\n        })\n    }, [])\n\n    return (\n        <StyledTable onClick={() => {\n            setVisible(false)\n        }}>\n\n            <AddFlag onClick={addFlagClickHandler}\n                     x={x}\n                     y={y}\n                     isShow={isVisible}\n                     flags={flags || []}\n                     includedFlags={includedFlags}\n                     login={flagLogin}\n                     updateUsers={fetchUsers}\n            />\n\n            {!fetchedUsers ?\n                <Loading /> :\n\n                <Table<User> dataSource={fetchedUsers} footer={() => {\n\n                    const onClick = () => {\n                        createUser(login, password).then((data) => {\n                            if (data.err) {\n                                message.error(data.message);\n                            } else {\n                                message.success(\"Успешно!\");\n                                fetchUsers();\n                            }\n                        });\n                    }\n\n                    return (\n                        <StyledTableFooter>\n                            <Input size=\"large\" placeholder=\"login\" value={login}\n                                   onChange={(e) => setLogin(e.target.value)}/>\n                            <Input size=\"large\" placeholder=\"password\" value={password}\n                                   onChange={(e) => setPassword(e.target.value)}/>\n                            <Button size=\"large\" onClick={onClick}>Add user</Button>\n                        </StyledTableFooter>\n                    )\n                }}>\n\n                    <Table.Column key=\"login\" title=\"Login\" dataIndex=\"login\"/>\n\n                    <Table.Column key=\"password\" title=\"Password\" dataIndex=\"password\"/>\n\n                    <Table.Column key=\"flags\" title=\"Flags\" dataIndex=\"flags\" render={(items, record: any) => {\n\n\n                        const clickHandler = (e: MouseEvent<HTMLDivElement>) => {\n                            e.stopPropagation();\n                            setX(e.clientX);\n                            setY(e.clientY);\n                            setVisible(true);\n                            setIncludedFlags(items.map((item: { color: string, id: number, title: string }) => item.id));\n                            setFlagLogin(record.login);\n                        }\n\n                        return (\n                            <>\n                                {items.map((item: { color: string, id: number, title: string }) => (\n                                    <Tag color={item.color} key={item.id}>{item.title}</Tag>))}\n                                <AddTag onClick={clickHandler}>\n                                    <Tag color=\"default\"><PlusOutlined/></Tag>\n                                </AddTag>\n                            </>\n                        )\n\n                    }}/>\n\n                    <Table.Column key=\"action\" title=\"Actions\" dataIndex=\"action\" render={(text, record: User) => {\n\n                        const onClick = () => {\n                            deleteUser(record.login).then((data) => {\n                                if (data.err) {\n                                    message.error(data.message);\n                                } else {\n                                    message.success(\"Успешно!\");\n                                    fetchUsers();\n                                }\n                                ;\n                            })\n                        }\n\n                        return (\n                            <>\n                                {currentLogin === record.login ? \"\" :\n                                    <Space size=\"middle\">\n                                        <a onClick={onClick}>Delete {record.login}</a>\n                                    </Space>}\n                            </>\n                        )\n                    }\n\n                    }/>\n\n                </Table>\n            }\n        </StyledTable>\n    )\n}","import {FC} from \"react\";\nimport styled from \"styled-components\";\nimport {UsersTable} from \"./UsersTable\";\n\nconst StyledAdmin = styled.div`\n  padding: 10px;\n`;\n\nexport const Admin: FC = () => {\n  return(\n    <StyledAdmin>\n      <UsersTable/>\n    </StyledAdmin>\n  )\n}"],"names":["getUsers","axios","config","withCredentials","data","createUser","login","password","err","message","deleteUser","addFlag","flagID","removeFlag","getFlags","StyledAddFlag","styled","props","y","x","isShow","theme","colors","darkPrimary","dark","AddFlag","flags","includedFlags","updateUsers","onClick","map","flag","style","margin","checked","some","includes","id","onChange","e","target","then","changeHandler","color","title","StyledTable","StyledTableFooter","AddTag","UsersTable","useState","fetchedUsers","setFetchedUsers","setLogin","setPassword","currentLogin","useSelector","state","auth","user","setX","setY","isVisible","setVisible","setFlags","flagLogin","setFlagLogin","setIncludedFlags","fetchUsers","users","useEffect","stopPropagation","dataSource","footer","size","placeholder","value","dataIndex","render","items","record","item","clientX","clientY","PlusOutlined","text","Loading","StyledAdmin","Admin"],"sourceRoot":""}